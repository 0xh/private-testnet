{"name":"Monero Examples","tagline":"private-testnet-network","body":"# Setting private monero testnet network\r\n\r\nHaving private [Monero](https://getmonero.org/) testnet network can be very useful, as you can play around\r\nwith the monero without risking making expensive mistakes on real network. However,\r\nit is not clear how to set up a private testnet network. In this example, this\r\nis demonstrated.\r\n\r\nThe example is executed on Xubuntu 15.10 x64 using current (as of Dec 2015)\r\ngithub version of Monero. Not sure if this will work with official, stable version\r\nfrom 2014.  How to compile latest monero is shown here:\r\n[compile-monero-ubuntu-1510](http://moneroexamples.github.io/compile-monero-ubuntu-1510/).\r\n\r\n\r\nThe testnet monero network will include 3 nodes, each with its own blockchain database\r\nand corresponding wallet on a single computer. The three testnet nodes will be listening\r\nat the following three ports: 28080, 38080 and 48080.\r\n\r\n\r\nThe example is based on the following reddit posts:\r\n - [How do I make my own testnet network, with e.g. two private nodes and private blockchain?](https://www.reddit.com/r/Monero/comments/3x5qwo/how_do_i_make_my_own_testnet_network_with_eg_two/)\r\n - [Does unlocking balance in testnet mode differers from the normal mode?](https://www.reddit.com/r/Monero/comments/3xj9vp/does_unlocking_balance_in_testnet_mode_differers/)\r\n\r\n## Step 1: Create testnet wallets\r\n\r\nEach of the nodes will have corresponding wallet. Thus we create them first. I assume that the wallets will be called `wallet_01.bin`,\r\n`wallet_02.bin` and `wallet_03.bin`. Also, I assume the wallets will be located in `~/testnet` folder.\r\n\r\nCreate the `~/testnet` folder and go into it:\r\n\r\n```bash\r\nmkdir ~/testnet && cd ~/testnet\r\n```\r\n\r\nExecute the following command three times, one for each wallet name, and follow the prompts to actually make the wallet and obtain its address.\r\n```bash\r\n/opt/bitmonero/simplewallet --testnet\r\n```\r\n\r\nIn this example, the addresses obtained were:\r\n\r\n\r\nwallet_01.bin:\r\n```\r\n9vcyth7idHcfGVripDeUJwQgjqyPYRbh2CMP9JudycTZGgot7tCp2o9aAsY9nUs9hLfoV3KQv59tE1hpZSpgTJXD9zVMHso\r\n```\r\n\r\nwallet_02.bin:\r\n```\r\n9uKAVnkfhE9Ww8ZZ9nA8JYYeeXD4f1XgLbHtsoQ3fBKf8QPgv1jyrn5Xc5DHKm8epwWLhrFJnH2w712N9Tk8yRxpGqJgN4C\r\n```\r\n\r\nwallet_03.bin:\r\n```\r\n9utaupAkugX7YEuGKL5LPeKD1TQHBYE7edEZXkEuFLirVNzcdf53WHWS3nUieF3vHeShTk6SqU5eSCce5W56mdcZHW67Cs3\r\n```\r\n\r\nExit from the wallets before proceedings. We need only addresses for now.\r\nThe `simplewallet` may crash as the blockchain is empty at this stage.\r\nWe need to mine some blocks, before the wallets can be used.\r\n\r\n## Step 2: Start first node\r\n\r\nThe node will listen for connections at port 28080 and connect to the two other nodes, i.e., those on ports 38080 and 48080. It will store its blockchain in `~/testnet/node_01`.\r\n\r\n```bash\r\n/opt/bitmonero/bitmonerod --testnet --no-igd --hide-my-port --testnet-data-dir ~/testnet/node_01 --p2p-bind-ip 127.0.0.1 --log-level 1 --add-exclusive-node 127.0.0.1:38080 --add-exclusive-node 127.0.0.1:48080\r\n```\r\n\r\nThe `bitmonerod` options are:\r\n\r\n - *testnet*   - Run on testnet. The wallet must be launched with --testnet flag.\r\n - *no-igd*    - Disable UPnP port mapping.\r\n - *hide-my-port* - Do not announce yourself as peerlist candidate.\r\n - *testnet-data-dir* - Specify testnet data directory.\r\n - *p2p-bind-ip* - Interface for p2p network protocol.\r\n - *log-level*  - Log level.\r\n - *add-exclusive-node* - Specify list of peers to connect to  only. If this option is given the options add-priority-node and seed-node are ignored.\r\n\r\n## Step 3: Start second node\r\n\r\nThe node will listen for connections at port 38080 and connect to the two other nodes, i.e., those on ports 28080 and 48080. It will store its blockchain in `~/testnet/node_02`.\r\n\r\n```bash\r\n/opt/bitmonero/bitmonerod --testnet --testnet-p2p-bind-port 38080 --testnet-rpc-bind-port 38081 --no-igd --hide-my-port  --log-level 1 --testnet-data-dir ~/testnet/node_02 --p2p-bind-ip 127.0.0.1 --add-exclusive-node 127.0.0.1:28080 --add-exclusive-node 127.0.0.1:48080\r\n```\r\n\r\nAdditional `bitmonerod` options are:\r\n\r\n - *testnet-p2p-bind-port* - Port for testnet p2p network protocol.\r\n - *testnet-rpc-bind-port* - Port for testnet RPC server.    \r\n\r\n\r\n## Step 4: Start third node\r\n\r\nThe node will listen for connections at port 48080 and connect to the two other nodes, i.e., those on ports 28080 and 38080. It will store its blockchain in `~/testnet/node_03`.\r\n\r\n\r\n```bash\r\n/opt/bitmonero/bitmonerod --testnet --testnet-p2p-bind-port 48080 --testnet-rpc-bind-port 48081 --no-igd --hide-my-port  --log-level 1 --testnet-data-dir ~/testnet/node_03 --p2p-bind-ip 127.0.0.1 --add-exclusive-node 127.0.0.1:28080 --add-exclusive-node 127.0.0.1:38080\r\n```\r\n\r\n`bitmonerod` options as before, but with different ports.\r\n\r\n## Step 5: Start mining\r\n\r\nHow you mine is up to you know. You can mine only for the first wallet, and keep other two empty for now,\r\nor mine in two nodes, or all three of them.\r\n\r\nFor example, to mine in two first wallets, the following commands can be used:\r\n\r\n\r\nin node_01 (mining to the first wallet):\r\n```\r\nstart_mining  9vcyth7idHcfGVripDeUJwQgjqyPYRbh2CMP9JudycTZGgot7tCp2o9aAsY9nUs9hLfoV3KQv59tE1hpZSpgTJXD9zVMHso 1\r\n```\r\n\r\nin node_02 (mining to the second wallet):\r\n```\r\nstart_mining  9uKAVnkfhE9Ww8ZZ9nA8JYYeeXD4f1XgLbHtsoQ3fBKf8QPgv1jyrn5Xc5DHKm8epwWLhrFJnH2w712N9Tk8yRxpGqJgN4C 1\r\n```\r\n\r\nin node_03 (mining to the first wallet):\r\n```\r\nstart_mining  9vcyth7idHcfGVripDeUJwQgjqyPYRbh2CMP9JudycTZGgot7tCp2o9aAsY9nUs9hLfoV3KQv59tE1hpZSpgTJXD9zVMHso 1\r\n```\r\n\r\nAs can be seen, both node_01 and node_03 mine to the first wallet. The third wallet\r\nis not used for mining in this example. The reason is that it will receive xmr,\r\nthrough transfers, from the remaining wallets.\r\n\r\n## Step 6: Start the wallets\r\n\r\nwallet_01:\r\n```\r\n/opt/bitmonero/simplewallet --testnet --trusted-daemon --wallet-file ~/testnet/wallet_01.bin\r\n```\r\n\r\nwallet_02:\r\n```\r\n/opt/bitmonero/simplewallet --testnet --daemon-port 38081 --wallet-file ~/testnet/wallet_02.bin\r\n```\r\n\r\nwallet_03:\r\n```\r\n/opt/bitmonero/simplewallet --testnet --daemon-port 48081 --wallet-file ~/testnet/wallet_03.bin\r\n```\r\n\r\n## Making transfers\r\n\r\nMined blocked require confirmation of 60 blocks. So before you can make any transfers between the wallets, need to mine at least 60 blocks. Until then, the wallets will have `unlocked balance` equal to 0. In contrast, for regular transfers between\r\nwallets to be unlocked it takes 6 blocks.\r\n\r\n\r\n\r\n## Example screenshots\r\n\r\n**Commands used to start the nodes and wallets:**\r\n![Before](https://raw.githubusercontent.com/moneroexamples/private-testnet/master/img/testnet_setup.jpg)\r\nThe above image shows the command used for each node (left column) and wallets (right column).\r\nEach row represents one node with the corresponding wallet.\r\n\r\n\r\n\r\n**After mining first 5 blocks:**\r\n![After](https://raw.githubusercontent.com/moneroexamples/private-testnet/master/img/testnet_run.jpg)\r\nThe above image shows the state of the nodes and wallets after frist few blocks mined. We see\r\nthat the first two wallets already have some xmr, but the `unlocked balance` values are zero. For them\r\nto unlock the mined xmr, we need to mine at least 60 blocks.\r\n\r\n\r\n**After mining first 60 blocks:**\r\n![After60](https://raw.githubusercontent.com/moneroexamples/private-testnet/master/img/testnet_run_60.jpg)\r\nAfter mining 60 blocks, the `unlocked balance` is no longer zero.\r\n\r\n\r\n## How can you help?\r\n\r\nConstructive criticism, code and website edits are always good. They can be made through github.\r\n\r\nSome Monero are also welcome:\r\n```\r\n48daf1rG3hE1Txapcsxh6WXNe9MLNKtu7W7tKTivtSoVLHErYzvdcpea2nSTgGkz66RFP4GKVAsTV14v6G3oddBTHfxP6tU\r\n```    \r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}